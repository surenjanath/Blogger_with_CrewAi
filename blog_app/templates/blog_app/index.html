<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Post Builder - CrewAI</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'blog_app/css/style.css' %}">
</head>
<body>
    <!-- Left Navigation Bar -->
    <nav class="left-nav">
        <a href="/" class="nav-icon" title="Home">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
        </a>
        <a href="/new/" class="nav-icon plus-icon active" title="New Post">+</a>
        <a href="/history/" class="nav-icon" title="History">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
        </a>
        <button type="button" class="nav-icon" title="Templates" id="templatesBtn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
        </button>
        <a href="/settings/" class="nav-icon" title="Settings">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M12 1v6m0 6v6m9-9h-6m-6 0H3m15.364 6.364l-4.243-4.243m-4.242 0L5.636 18.364m12.728 0l-4.243-4.243m-4.242 0L5.636 5.636"></path>
            </svg>
        </a>
        <div class="nav-dots">
            <div class="dot yellow" title="Status"></div>
            <div class="dot purple" title="Status"></div>
            <div class="dot green" title="Status"></div>
        </div>
        <button type="button" class="nav-icon" title="Search" id="searchBtn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
            </svg>
        </button>
    </nav>

    <div class="main-container">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Create Blog Post</h2>
                <p class="subtitle-text" id="subtitleDisplay">Write about <span id="topicPreview">your topic</span></p>
            </div>

            <form id="blogForm" class="blog-form">
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <button type="button" class="quick-btn" id="templateBtn" title="Load Template">üìã Template</button>
                    <button type="button" class="quick-btn" id="clearBtn" title="Clear Form">üóëÔ∏è Clear</button>
                </div>

                <!-- Language Selection -->
                <div class="form-section">
                    <label class="section-label">Language</label>
                    <div class="language-selector">
                        <span class="flag">üá∫üá∏</span>
                        <span>English</span>
                    </div>
                </div>

                <!-- Target Audience -->
                <div class="form-section">
                    <label class="section-label">Target Audience</label>
                    <div class="tags-container" id="audienceTags"></div>
                    <input 
                        type="text" 
                        id="audienceInput" 
                        class="tag-input" 
                        placeholder="Press Enter to add"
                        maxlength="100"
                    >
                    <div class="char-counter">
                        <span id="audienceCount">0</span>/10
                    </div>
                </div>

                <!-- Key Points -->
                <div class="form-section">
                    <label class="section-label">Key Points</label>
                    <textarea 
                        id="keyPoints" 
                        class="text-input" 
                        placeholder="What should be covered?"
                        maxlength="1000"
                        rows="2"
                    ></textarea>
                    <div class="char-counter">
                        <span id="keyPointsCount">0</span>/1000
                    </div>
                </div>

                <!-- Examples -->
                <div class="form-section">
                    <label class="section-label">Examples</label>
                    <textarea 
                        id="examples" 
                        class="text-input" 
                        placeholder="Specific examples or references"
                        maxlength="1000"
                        rows="2"
                    ></textarea>
                    <div class="char-counter">
                        <span id="examplesCount">0</span>/1000
                    </div>
                </div>

                <!-- Crew Configuration -->
                <div class="form-section">
                    <label class="section-label">Crew Configuration</label>
                    <select id="crewConfig" class="tone-select">
                        <option value="">Use Default</option>
                    </select>
                    <a href="/settings/" class="quick-btn" style="margin-top: 6px; width: 100%; text-decoration: none; display: block; text-align: center;">‚öôÔ∏è Manage Settings</a>
                </div>

                <!-- Tone & Length -->
                <div class="form-row">
                    <div class="form-section half-width">
                        <label class="section-label">Tone</label>
                        <select id="tone" class="tone-select">
                            <option value="friendly">üòä Friendly</option>
                            <option value="professional">üíº Professional</option>
                            <option value="casual">üòé Casual</option>
                            <option value="formal">üìã Formal</option>
                            <option value="humorous">üòÑ Humorous</option>
                            <option value="informative">üìö Informative</option>
                        </select>
                    </div>
                    <div class="form-section half-width">
                        <label class="section-label">Length</label>
                        <select id="length" class="tone-select">
                            <option value="short">Short (300-500)</option>
                            <option value="medium" selected>Medium (500-1000)</option>
                            <option value="long">Long (1000+)</option>
                        </select>
                    </div>
                </div>

                <!-- Generate Button -->
                <button type="submit" id="generateBtn" class="generate-btn">
                    <span>‚ö°</span>
                    Generate Blog Post
                </button>

                <button type="button" id="stopBtn" class="stop-btn hidden">
                    <span>‚èπÔ∏è</span>
                    Stop
                </button>
            </form>
        </aside>

        <!-- Right Content Area -->
        <main class="content-area">
            <!-- Toolbar -->
            <div class="toolbar">
                <div class="toolbar-left">
                    <button class="toolbar-btn" id="fileBtn">File</button>
                    <div class="toolbar-divider"></div>
                    <button class="toolbar-btn" title="Undo" id="undoBtn">‚Ü∂</button>
                    <button class="toolbar-btn" title="Redo" id="redoBtn">‚Ü∑</button>
                    <div class="toolbar-divider"></div>
                    <select class="toolbar-select" id="formatSelect">
                        <option>Normal</option>
                        <option>H1</option>
                        <option>H2</option>
                        <option>H3</option>
                    </select>
                    <div class="toolbar-divider"></div>
                    <button class="toolbar-btn" title="Bold" id="boldBtn"><strong>B</strong></button>
                    <button class="toolbar-btn" title="Italic" id="italicBtn"><em>I</em></button>
                    <button class="toolbar-btn" title="Underline" id="underlineBtn"><u>U</u></button>
                    <div class="toolbar-divider"></div>
                    <button class="toolbar-btn" title="Copy" id="copyBtn">üìã</button>
                    <button class="toolbar-btn" title="Download" id="downloadBtn">‚¨áÔ∏è</button>
                </div>
                <div class="toolbar-right">
                    <div class="stats">
                        <span id="wordCount">0 words</span>
                        <span class="divider">‚Ä¢</span>
                        <span id="readTime">0 min read</span>
                    </div>
                    <span class="saved-indicator" id="savedIndicator">‚óè</span>
                    <button class="toolbar-btn hidden" id="saveBtn" onclick="saveCurrentPost()">Save</button>
                    <button class="toolbar-btn" id="exportBtn">Export</button>
                    <button class="toolbar-btn" id="shareBtn">Share</button>
                </div>
            </div>

            <!-- Content Display -->
            <div class="editor-container">
                <!-- Loading State -->
                <div id="loadingSection" class="loading-section hidden">
                    <div class="loading-content">
                        <div class="spinner-large"></div>
                        <h3>Generating your blog post...</h3>
                        
                        <!-- Progress Bar -->
                        <div class="progress-container">
                            <div class="progress-bar-wrapper">
                                <div id="progressBar" class="progress-bar" style="width: 0%"></div>
                            </div>
                            <div class="progress-percentage" id="progressPercentage">0%</div>
                        </div>
                        
                        <!-- Current Status -->
                        <div class="current-status">
                            <div class="current-agent" id="currentAgentDisplay">
                                <span class="status-label">Current Agent:</span>
                                <span id="currentAgentName">Initializing...</span>
                            </div>
                            <div class="current-task" id="currentTaskDisplay">
                                <span class="status-label">Task:</span>
                                <span id="currentTaskDescription">Preparing crew...</span>
                            </div>
                            <div class="progress-message" id="progressMessageDisplay">
                                <span id="progressMessageText">Initializing crew and agents...</span>
                            </div>
                        </div>
                        
                        <!-- Agent Status Indicators -->
                        <div class="agent-status">
                            <div class="status-item">
                                <span class="status-icon">üîç</span>
                                <span id="researcherStatus">Waiting...</span>
                            </div>
                            <div class="status-item">
                                <span class="status-icon">‚úçÔ∏è</span>
                                <span id="writerStatus">Waiting...</span>
                            </div>
                            <div class="status-item">
                                <span class="status-icon">üìù</span>
                                <span id="editorStatus">Waiting...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Initial State / Empty State -->
                <div id="initialState" class="initial-state">
                    <div class="initial-content">
                        <div class="fun-icon">üöÄ</div>
                        <h2>Ready to Create Something Amazing?</h2>
                        <p class="encouraging-text">Fill in your topic and preferences above, then hit that "Generate Blog Post" button. Our AI agents are ready to craft your perfect blog post!</p>
                        <div class="fun-features">
                            <div class="feature-item">‚ú® AI-Powered Writing</div>
                            <div class="feature-item">üìù Professional Quality</div>
                            <div class="feature-item">‚ö° Fast Generation</div>
                        </div>
                    </div>
                </div>

                <!-- Result Display -->
                <div id="resultSection" class="result-section hidden">
                    <div class="editor-content">
                        <div id="postTitle" class="post-title" contenteditable="true" spellcheck="true" data-placeholder="Your Blog Post Title"></div>
                        <div id="postContent" class="post-content" contenteditable="true" spellcheck="true" data-placeholder="Enter your topic and preferences, then click 'Generate Blog Post' to create your content.">
                        </div>
                    </div>
                </div>

                <!-- Error Display -->
                <div id="errorSection" class="error-section hidden">
                    <div class="error-content">
                        <span class="error-icon">‚ö†Ô∏è</span>
                        <h3>Error</h3>
                        <p id="errorText"></p>
                        <button id="retryBtn" class="btn-secondary">Try Again</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="exportModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Export Blog Post</h3>
                <button class="modal-close" id="closeExportModal">√ó</button>
            </div>
            <div class="modal-body">
                <button class="export-option" id="exportPDF">üìÑ Export as PDF</button>
                <button class="export-option" id="exportMarkdown">üìù Export as Markdown</button>
                <button class="export-option" id="exportText">üìÑ Export as Text</button>
                <button class="export-option" id="exportHTML">üåê Export as HTML</button>
            </div>
        </div>
    </div>

    <!-- Agent Form Modal -->
    <div id="agentFormModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="agentFormTitle">Add Agent</h3>
                <button class="modal-close" id="closeAgentFormModal">√ó</button>
            </div>
            <div class="modal-body">
                <form id="agentForm">
                    <input type="hidden" id="agentId">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="agentName" required>
                    </div>
                    <div class="form-group">
                        <label>Role</label>
                        <input type="text" id="agentRole" required>
                    </div>
                    <div class="form-group">
                        <label>Goal</label>
                        <textarea id="agentGoal" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Backstory</label>
                        <textarea id="agentBackstory" rows="4" required></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group half-width">
                            <label>Order</label>
                            <input type="number" id="agentOrder" value="0" min="0">
                        </div>
                        <div class="form-group half-width">
                            <label>
                                <input type="checkbox" id="agentIsActive" checked> Active
                            </label>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="cancelAgentForm">Cancel</button>
                        <button type="submit" class="btn-primary">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Task Form Modal -->
    <div id="taskFormModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="taskFormTitle">Add Task</h3>
                <button class="modal-close" id="closeTaskFormModal">√ó</button>
            </div>
            <div class="modal-body">
                <form id="taskForm">
                    <input type="hidden" id="taskId">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="taskName" required>
                    </div>
                    <div class="form-group">
                        <label>Agent</label>
                        <select id="taskAgent" required></select>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="taskDescription" rows="4" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Expected Output</label>
                        <textarea id="taskExpectedOutput" rows="2" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Depends On (Optional)</label>
                        <select id="taskDependsOn">
                            <option value="">None</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group half-width">
                            <label>Order</label>
                            <input type="number" id="taskOrder" value="0" min="0">
                        </div>
                        <div class="form-group half-width">
                            <label>
                                <input type="checkbox" id="taskIsActive" checked> Active
                            </label>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="cancelTaskForm">Cancel</button>
                        <button type="submit" class="btn-primary">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Crew Form Modal -->
    <div id="crewFormModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="crewFormTitle">Add Crew Configuration</h3>
                <button class="modal-close" id="closeCrewFormModal">√ó</button>
            </div>
            <div class="modal-body">
                <form id="crewForm">
                    <input type="hidden" id="crewId">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="crewName" required>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="crewDescription" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Process Type</label>
                        <select id="crewProcessType" required>
                            <option value="sequential">Sequential</option>
                            <option value="parallel">Parallel</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Agents</label>
                        <div id="crewAgentsList" class="checkbox-list"></div>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="crewIsDefault"> Set as Default
                        </label>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="cancelCrewForm">Cancel</button>
                        <button type="submit" class="btn-primary">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Templates Modal -->
    <div id="templatesModal" class="modal hidden">
        <div class="modal-content templates-modal">
            <div class="modal-header">
                <h3>Blog Post Templates</h3>
                <button class="modal-close" id="closeTemplatesModal">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Template Categories -->
                <div class="template-categories">
                    <button class="category-btn active" data-category="all">All</button>
                    <button class="category-btn" data-category="business">Business</button>
                    <button class="category-btn" data-category="tech">Technology</button>
                    <button class="category-btn" data-category="creative">Creative</button>
                    <button class="category-btn" data-category="education">Education</button>
                    <button class="category-btn" data-category="lifestyle">Lifestyle</button>
                </div>
                
                <!-- Templates Grid -->
                <div class="templates-grid" id="templatesGrid">
                    <!-- Business Templates -->
                    <div class="template-card" data-template="marketing" data-category="business">
                        <div class="template-icon" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">
                            üìà
                        </div>
                        <h4>Digital Marketing</h4>
                        <p>SEO strategies, content marketing, social media trends, and digital advertising</p>
                        <div class="template-tags">
                            <span class="template-tag">Marketing</span>
                            <span class="template-tag">SEO</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="marketing">Use Template</button>
                    </div>
                    
                    <div class="template-card" data-template="business" data-category="business">
                        <div class="template-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                            üíº
                        </div>
                        <h4>Business Strategy</h4>
                        <p>Business growth, entrepreneurship, leadership, and management insights</p>
                        <div class="template-tags">
                            <span class="template-tag">Business</span>
                            <span class="template-tag">Strategy</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="business">Use Template</button>
                    </div>
                    
                    <div class="template-card" data-template="startup" data-category="business">
                        <div class="template-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                            üöÄ
                        </div>
                        <h4>Startup Guide</h4>
                        <p>Startup advice, funding, product development, and scaling strategies</p>
                        <div class="template-tags">
                            <span class="template-tag">Startup</span>
                            <span class="template-tag">Entrepreneurship</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="startup">Use Template</button>
                    </div>
                    
                    <!-- Technology Templates -->
                    <div class="template-card" data-template="tech" data-category="tech">
                        <div class="template-icon" style="background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);">
                            üíª
                        </div>
                        <h4>Tech Blog</h4>
                        <p>Latest technology trends, innovations, software development, and best practices</p>
                        <div class="template-tags">
                            <span class="template-tag">Technology</span>
                            <span class="template-tag">Development</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="tech">Use Template</button>
                    </div>
                    
                    <div class="template-card" data-template="ai" data-category="tech">
                        <div class="template-icon" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);">
                            ü§ñ
                        </div>
                        <h4>AI & Machine Learning</h4>
                        <p>Artificial intelligence, machine learning, neural networks, and AI applications</p>
                        <div class="template-tags">
                            <span class="template-tag">AI</span>
                            <span class="template-tag">ML</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="ai">Use Template</button>
                    </div>
                    
                    <div class="template-card" data-template="programming" data-category="tech">
                        <div class="template-icon" style="background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);">
                            ‚å®Ô∏è
                        </div>
                        <h4>Programming Tutorial</h4>
                        <p>Coding tutorials, programming languages, frameworks, and development guides</p>
                        <div class="template-tags">
                            <span class="template-tag">Programming</span>
                            <span class="template-tag">Tutorial</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="programming">Use Template</button>
                    </div>
                    
                    <!-- Creative Templates -->
                    <div class="template-card" data-template="design" data-category="creative">
                        <div class="template-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                            üé®
                        </div>
                        <h4>Design & UX</h4>
                        <p>UI/UX design principles, trends, tools, design systems, and best practices</p>
                        <div class="template-tags">
                            <span class="template-tag">Design</span>
                            <span class="template-tag">UX</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="design">Use Template</button>
                    </div>
                    
                    <div class="template-card" data-template="writing" data-category="creative">
                        <div class="template-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                            ‚úçÔ∏è
                        </div>
                        <h4>Creative Writing</h4>
                        <p>Creative writing tips, storytelling, narrative techniques, and writing inspiration</p>
                        <div class="template-tags">
                            <span class="template-tag">Writing</span>
                            <span class="template-tag">Creative</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="writing">Use Template</button>
                    </div>
                    
                    <div class="template-card" data-template="photography" data-category="creative">
                        <div class="template-icon" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">
                            üì∏
                        </div>
                        <h4>Photography</h4>
                        <p>Photography tips, camera techniques, composition, editing, and gear reviews</p>
                        <div class="template-tags">
                            <span class="template-tag">Photography</span>
                            <span class="template-tag">Visual</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="photography">Use Template</button>
                    </div>
                    
                    <!-- Education Templates -->
                    <div class="template-card" data-template="tutorial" data-category="education">
                        <div class="template-icon" style="background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);">
                            üìö
                        </div>
                        <h4>How-To Guide</h4>
                        <p>Step-by-step tutorials, guides, instructions, and educational content</p>
                        <div class="template-tags">
                            <span class="template-tag">Tutorial</span>
                            <span class="template-tag">Guide</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="tutorial">Use Template</button>
                    </div>
                    
                    <div class="template-card" data-template="review" data-category="education">
                        <div class="template-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                            ‚≠ê
                        </div>
                        <h4>Product Review</h4>
                        <p>Product reviews, comparisons, pros and cons, and buying guides</p>
                        <div class="template-tags">
                            <span class="template-tag">Review</span>
                            <span class="template-tag">Product</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="review">Use Template</button>
                    </div>
                    
                    <div class="template-card" data-template="news" data-category="education">
                        <div class="template-icon" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
                            üì∞
                        </div>
                        <h4>News & Analysis</h4>
                        <p>Current events, news analysis, industry updates, and trend reports</p>
                        <div class="template-tags">
                            <span class="template-tag">News</span>
                            <span class="template-tag">Analysis</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="news">Use Template</button>
                    </div>
                    
                    <!-- Lifestyle Templates -->
                    <div class="template-card" data-template="health" data-category="lifestyle">
                        <div class="template-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                            üí™
                        </div>
                        <h4>Health & Wellness</h4>
                        <p>Health tips, fitness, nutrition, mental wellness, and healthy living</p>
                        <div class="template-tags">
                            <span class="template-tag">Health</span>
                            <span class="template-tag">Wellness</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="health">Use Template</button>
                    </div>
                    
                    <div class="template-card" data-template="travel" data-category="lifestyle">
                        <div class="template-icon" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">
                            ‚úàÔ∏è
                        </div>
                        <h4>Travel Guide</h4>
                        <p>Travel destinations, tips, itineraries, and travel experiences</p>
                        <div class="template-tags">
                            <span class="template-tag">Travel</span>
                            <span class="template-tag">Guide</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="travel">Use Template</button>
                    </div>
                    
                    <div class="template-card" data-template="food" data-category="lifestyle">
                        <div class="template-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                            üçï
                        </div>
                        <h4>Food & Recipe</h4>
                        <p>Recipes, cooking tips, restaurant reviews, and culinary experiences</p>
                        <div class="template-tags">
                            <span class="template-tag">Food</span>
                            <span class="template-tag">Recipe</span>
                        </div>
                        <button class="btn-primary small use-template" data-template="food">Use Template</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{% static 'blog_app/js/main.js' %}"></script>
    <script>
        // Comprehensive Templates System - matches allTemplates in main.js
        const templates = window.allTemplates || {
            // Business Templates
            marketing: {
                keyPoints: 'Digital marketing strategies, SEO optimization, content marketing, social media trends, email campaigns, and conversion optimization',
                examples: 'Content marketing campaigns, SEO best practices, social media strategies, email marketing automation, PPC advertising',
                tone: 'professional',
                length: 'medium',
                audience: ['Marketers', 'Business Owners', 'Content Creators', 'Digital Marketing Professionals']
            },
            business: {
                keyPoints: 'Business growth strategies, entrepreneurship, leadership principles, management insights, and organizational development',
                examples: 'Successful startups, business case studies, leadership examples, management frameworks, growth strategies',
                tone: 'professional',
                length: 'medium',
                audience: ['Entrepreneurs', 'Business Leaders', 'Managers', 'Business Students']
            },
            startup: {
                keyPoints: 'Startup advice, funding strategies, product development, scaling businesses, and entrepreneurial insights',
                examples: 'Successful startup stories, funding rounds, product launches, scaling challenges, founder experiences',
                tone: 'friendly',
                length: 'medium',
                audience: ['Startup Founders', 'Entrepreneurs', 'Investors', 'Aspiring Business Owners']
            },
            // Technology Templates
            tech: {
                keyPoints: 'Latest technology trends, software development, innovations, best practices, and tech industry insights',
                examples: 'AI developments, cloud computing, cybersecurity, software frameworks, programming languages, tech tools',
                tone: 'informative',
                length: 'medium',
                audience: ['Developers', 'Tech Enthusiasts', 'IT Professionals', 'Software Engineers']
            },
            ai: {
                keyPoints: 'Artificial intelligence, machine learning, neural networks, AI applications, and future of AI technology',
                examples: 'ChatGPT, neural networks, deep learning, AI tools, machine learning models, AI ethics',
                tone: 'informative',
                length: 'long',
                audience: ['AI Researchers', 'Data Scientists', 'Tech Enthusiasts', 'Developers']
            },
            programming: {
                keyPoints: 'Programming tutorials, coding best practices, software development, frameworks, and development workflows',
                examples: 'Code examples, programming languages, development tools, coding patterns, software architecture',
                tone: 'informative',
                length: 'medium',
                audience: ['Developers', 'Programmers', 'Software Engineers', 'Coding Students']
            },
            // Creative Templates
            design: {
                keyPoints: 'UI/UX design principles, design trends, tools, design systems, user experience, and visual design',
                examples: 'Design systems, user experience case studies, design tools, visual design trends, interface examples',
                tone: 'friendly',
                length: 'medium',
                audience: ['Designers', 'UI/UX Professionals', 'Creatives', 'Product Designers']
            },
            writing: {
                keyPoints: 'Creative writing tips, storytelling techniques, narrative structure, writing inspiration, and author advice',
                examples: 'Writing examples, storytelling techniques, narrative structures, writing prompts, author interviews',
                tone: 'friendly',
                length: 'medium',
                audience: ['Writers', 'Authors', 'Content Creators', 'Creative Professionals']
            },
            photography: {
                keyPoints: 'Photography tips, camera techniques, composition rules, editing workflows, and gear recommendations',
                examples: 'Photo examples, camera settings, composition techniques, editing software, photography gear',
                tone: 'friendly',
                length: 'medium',
                audience: ['Photographers', 'Visual Artists', 'Content Creators', 'Hobbyists']
            },
            // Education Templates
            tutorial: {
                keyPoints: 'Step-by-step instructions, how-to guides, tutorials, educational content, and learning resources',
                examples: 'Tutorial examples, step-by-step processes, instructional content, learning resources, practical guides',
                tone: 'informative',
                length: 'long',
                audience: ['Learners', 'Students', 'Educators', 'Tutorial Seekers']
            },
            review: {
                keyPoints: 'Product reviews, comparisons, pros and cons, buying guides, and detailed analysis',
                examples: 'Product features, user experiences, comparisons, pros and cons, recommendations',
                tone: 'informative',
                length: 'medium',
                audience: ['Consumers', 'Shoppers', 'Tech Enthusiasts', 'Review Readers']
            },
            news: {
                keyPoints: 'Current events, news analysis, industry updates, trend reports, and breaking news coverage',
                examples: 'Recent events, industry news, trend analysis, current affairs, news updates',
                tone: 'professional',
                length: 'medium',
                audience: ['News Readers', 'Industry Professionals', 'General Public', 'Analysts']
            },
            // Lifestyle Templates
            health: {
                keyPoints: 'Health tips, fitness advice, nutrition guidance, mental wellness, and healthy living strategies',
                examples: 'Fitness routines, healthy recipes, wellness practices, mental health tips, nutrition advice',
                tone: 'friendly',
                length: 'medium',
                audience: ['Health Enthusiasts', 'Fitness Seekers', 'Wellness Advocates', 'General Public']
            },
            travel: {
                keyPoints: 'Travel destinations, travel tips, itineraries, travel experiences, and destination guides',
                examples: 'Travel destinations, itinerary examples, travel tips, destination reviews, travel experiences',
                tone: 'friendly',
                length: 'medium',
                audience: ['Travelers', 'Adventure Seekers', 'Tourists', 'Travel Enthusiasts']
            },
            food: {
                keyPoints: 'Recipes, cooking tips, restaurant reviews, culinary experiences, and food culture',
                examples: 'Recipe examples, cooking techniques, restaurant experiences, food trends, culinary tips',
                tone: 'friendly',
                length: 'medium',
                audience: ['Food Lovers', 'Home Cooks', 'Foodies', 'Culinary Enthusiasts']
            }
        };

        // Templates functionality
        const templatesBtn = document.getElementById('templatesBtn');
        const templatesModal = document.getElementById('templatesModal');
        const closeTemplatesModal = document.getElementById('closeTemplatesModal');
        const categoryButtons = document.querySelectorAll('.category-btn');
        const templateCards = document.querySelectorAll('.template-card');

        templatesBtn?.addEventListener('click', () => {
            templatesModal.classList.remove('hidden');
        });

        closeTemplatesModal?.addEventListener('click', () => {
            templatesModal.classList.add('hidden');
        });

        templatesModal?.addEventListener('click', (e) => {
            if (e.target === templatesModal) {
                templatesModal.classList.add('hidden');
            }
        });

        // Category filtering
        categoryButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const category = btn.dataset.category;
                
                // Update active state
                categoryButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                // Filter templates
                templateCards.forEach(card => {
                    const cardCategory = card.dataset.category;
                    if (category === 'all' || cardCategory === category) {
                        card.classList.remove('hidden');
                    } else {
                        card.classList.add('hidden');
                    }
                });
            });
        });

        // Use template
        document.querySelectorAll('.use-template').forEach(btn => {
            btn.addEventListener('click', () => {
                const template = btn.dataset.template;
                const templateData = templates[template];
                
                if (templateData) {
                    // Use applyTemplate function if available, otherwise apply directly
                    if (typeof applyTemplate !== 'undefined') {
                        applyTemplate(templateData);
                    } else if (typeof keyPoints !== 'undefined') {
                        // Fallback: apply directly
                        keyPoints.value = templateData.keyPoints || '';
                        examples.value = templateData.examples || '';
                        tone.value = templateData.tone || 'friendly';
                        
                        if (templateData.length && typeof length !== 'undefined') {
                            length.value = templateData.length;
                        }
                        
                        if (typeof audienceTagList !== 'undefined') {
                            audienceTagList = [];
                            renderTags();
                        }
                        
                        if (templateData.audience && typeof addTag !== 'undefined') {
                            templateData.audience.forEach(tag => {
                                addTag(tag);
                            });
                        }
                        
                        if (typeof updateTopicPreview !== 'undefined') {
                            updateTopicPreview();
                        }
                        if (typeof keyPointsCount !== 'undefined') {
                            keyPointsCount.textContent = keyPoints.value.length;
                        }
                        if (typeof examplesCount !== 'undefined') {
                            examplesCount.textContent = examples.value.length;
                        }
                    }
                    
                    // Close modal
                    templatesModal.classList.add('hidden');
                    
                    // Show success message
                    if (typeof templateBtn !== 'undefined') {
                        const originalText = templateBtn.textContent;
                        templateBtn.textContent = '‚úì Template Applied';
                        templateBtn.style.background = '#10b981';
                        setTimeout(() => {
                            templateBtn.textContent = originalText;
                            templateBtn.style.background = '';
                        }, 2000);
                    }
                }
            });
        });
    </script>
</body>
</html>
